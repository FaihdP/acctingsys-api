import{DynamoDBClient as i,PutItemCommand as d}from"@aws-sdk/client-dynamodb";import{marshall as m}from"@aws-sdk/util-dynamodb";var y=new i({}),A="payments",I=new Set(["DIGITAL","CASH"]),p={"Access-Control-Allow-Headers":"Content-Type,X-Api-Key","Access-Control-Allow-Origin":"https://localhost:3000","Access-Control-Allow-Methods":"OPTIONS,POST"},C={PaymentID:e=>!!e,date:e=>!!e,value:e=>!!e,type:e=>I.has(e),bank:e=>!!e};function O(e){let o=Object.entries(C).find(([t,s])=>!s(e[t]));if(o)throw{statusCode:400,body:JSON.stringify({message:"Invalid or missing fields: "+o[0]})}}var b=async e=>{let o={},{PaymentID:t,date:s,value:r,type:l,bank:c}=JSON.parse(e.body),a={PaymentID:t,date:s,value:r,type:l,bank:c};try{O(a),await y.send(new d({TableName:A,Item:m(a)})),o={statusCode:200,body:JSON.stringify({message:"Document saved correctly"})}}catch(n){console.error(n),o={statusCode:n.statusCode||500,body:n.body||JSON.stringify({message:"Internal server error"})}}return{headers:p,...o}};export{b as handler};
